---
import { getCollection } from 'astro:content';
import '../../styles/global.css';

export async function getStaticPaths() {
  const spots = await getCollection('spots');
  return spots.map(spot => ({
    params: { slug: spot.slug },
    props: { spot },
  }));
}

const { spot } = Astro.props;
const { Content } = await spot.render();
---

<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{spot.data.title} - ì§€ë¦¬ì‚° ê´€ê´‘ì§€</title>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <header class="sticky top-0 bg-white/90 backdrop-blur-sm border-b border-slate-200 z-50 px-4 py-3 flex items-center justify-center">
        <div class="w-full max-w-2xl flex items-center">
            <a href="/" class="text-xl mr-4 text-slate-500 hover:text-slate-800">â†</a>
            <h1 class="text-base font-bold truncate">{spot.data.title}</h1>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  (í­ ì œí•œ: max-w-2xl) -->
    <main class="max-w-2xl mx-auto bg-white min-h-screen shadow-sm">
        
        <!-- ê¸°ë³¸ ì •ë³´ -->
        <div class="p-6 border-b border-slate-100">
            <div class="flex gap-2 mb-3">
                <span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded font-medium">{spot.data.region}</span>
                <span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded font-medium">{spot.data.category}</span>
            </div>
            <h2 class="text-3xl font-bold text-slate-800 mb-4">{spot.data.title}</h2>
            
            <div class="bg-slate-50 rounded-lg p-4 space-y-2">
                <div class="flex items-center justify-between">
                    <span class="text-sm font-bold text-slate-500">ê±°ë¦¬ (íƒë°©ì› ê¸°ì¤€)</span>
                    <span class="text-lg font-bold text-green-700">ğŸš— {spot.data.distance}km <span class="text-sm font-normal text-slate-400">({spot.data.time})</span></span>
                </div>
                <div class="flex items-start gap-2 pt-2 border-t border-slate-200">
                     <span class="text-sm font-bold text-slate-500 shrink-0">ì£¼ì†Œ</span>
                    <span class="text-sm text-slate-600">{spot.data.address}</span>
                </div>
            </div>
        </div>

        <!-- ë³¸ë¬¸ ë‚´ìš© -->
        <div class="p-6 prose prose-slate prose-sm max-w-none leading-relaxed">
            <Content />
        </div>

        <!-- í•˜ë‹¨ ê²€ìƒ‰ ë²„íŠ¼ -->
        <div class="p-6 space-y-3 bg-slate-50 border-t border-slate-100">
            <p class="text-xs text-center text-slate-400 mb-2">ë” ìì„¸í•œ ì •ë³´ê°€ ê¶ê¸ˆí•˜ë‹¤ë©´?</p>
            <a href={`https://www.google.com/search?q=${spot.data.region} ${spot.data.title}`} target="_blank" class="block w-full py-3 bg-white border border-slate-300 rounded-lg text-center text-sm font-bold text-slate-700 hover:bg-slate-100 transition shadow-sm">
                G êµ¬ê¸€ì—ì„œ ê²€ìƒ‰í•˜ê¸°
            </a>
            <a href={`https://www.youtube.com/results?search_query=${spot.data.region} ${spot.data.title}`} target="_blank" class="block w-full py-3 bg-white border border-slate-300 rounded-lg text-center text-sm font-bold text-slate-700 hover:bg-slate-100 transition shadow-sm">
                ğŸ“º ìœ íŠœë¸Œ ì˜ìƒ ì°¾ì•„ë³´ê¸°
            </a>
            <!-- êµ­ê°€ìœ ì‚° ê²€ìƒ‰ ì—°ë™ (ì´ë¦„ë§Œ ì „ë‹¬) -->
            <a href={`https://exam1-beige.vercel.app/?q=${spot.data.title}`} target="_blank" class="block w-full py-3 bg-green-700 text-white rounded-lg text-center text-sm font-bold shadow-sm hover:bg-green-800 transition">
                ğŸ›ï¸ êµ­ê°€ìœ ì‚° ì •ë³´ ë³´ê¸°
            </a>
        </div>
    </main>

</body>
</html>